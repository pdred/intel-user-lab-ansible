- name: Install BIND DNS Server
  ansible.builtin.yum:
    name: bind
    state: present

- name: Configure BIND DNS Server
  ansible.builtin.template:
    src: "named.conf.j2"
    dest: "/etc/named/named.conf"
    owner: root
    group: named
    mode: '0644'

- name: Configure BIND DNS Zones
  ansible.builtin.copy:
    content: "{{ item }}"
    dest: "/var/named/{{ item }}"
    owner: root
    group: named
    mode: '0644'
  loop:
    - db.lab.com
    - db.10.10.10
  notify: restart bind

- name: Ensure BIND is running and enabled
  ansible.builtin.service:
    name: named
    state: started
    enabled: true
